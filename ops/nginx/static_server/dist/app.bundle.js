webpackJsonp([0],{0:function(e,exports,t){t(1),e.exports=t(299)},299:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=t(300),a=n(i),o=t(302),l=n(o),r=t(303),s=n(r),u=t(305),d=n(u),c=t(306),m=n(c),f=t(307),p=n(f),v=t(328),h=n(v),g=t(329),y=n(g),b=t(330),_=n(b),j=t(333),x=n(j),M=t(351),k=n(M),S=t(653),w=n(S),P=t(657),L=n(P);t(663),a["default"].module("app",[d["default"],s["default"],L["default"],m["default"],l["default"].name,x["default"].name,k["default"].name]).service({MissionService:h["default"]}).service({DialogService:y["default"]}).service({Auth:p["default"]}).service({starService:_["default"]}).config(["ENV","$locationProvider","$mdThemingProvider","$httpProvider","$authProvider","$stateProvider",function(e,t,n,i,a,o){"ngInject";t.html5Mode(!0).hashPrefix("!"),n.theme("default").primaryPalette("indigo",{"default":"500"}).accentPalette("pink",{"default":"500"}),a.google({clientId:e.GOOGLE.CLIENT_ID,url:e.API_HOST+"/auth/google"}),a.oauth2({name:"adfs",redirectUri:window.location.origin,responseType:"token",authorizationEndpoint:e.API_HOST+"/auth/adfs-saml"}),o.state("auth",{url:"","abstract":!0,data:{requiredLogin:!0},resolve:{authenticate:["Auth","$q","$timeout","$state",function(e,t,n,i){var a=e;return a.isAuthenticated()?t.when():(n(function(){i.go(a._stateLogin)}),t.reject())}]},template:"<ui-view>"})}]).component("app",w["default"])},302:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=a["default"].module("app.config",[]).constant("ENV",{GOOGLE:{CLIENT_ID:"726385581494-3te31aa3t09polsm5paeg4eeh9qgbcgl.apps.googleusercontent.com",SCOPE:"https://www.googleapis.com/auth/userinfo.email"},API_HOST:"https://localhost",API_URL:"https://localhost/api/v0.1"});exports["default"]=o},307:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t,n,i){"ngInject";(0,a["default"])(this,e),this.$auth=t,this.$state=i,this.$rootScope=n,this._stateLogin="loginPage",this._stateAfterLogout="loginPage",this._stateAfterLogin="auth.map"}return e.$inject=["$auth","$rootScope","$state"],(0,l["default"])(e,[{key:"authenticate",value:function(e,t){var n=this,i=this.$auth.authenticate(e,t);return i.then(function(t){n.$rootScope.$emit("user:login",t),"adfs"==e&&n.$auth.setToken(t.token),n.$state.go(n._stateAfterLogin)}),i}},{key:"isAuthenticated",value:function(){return this.$auth.isAuthenticated()}},{key:"logout",value:function(){var e=this;this.$auth.logout().then(function(){var t=e.$state.current;t.data&&t.data.requiredLogin&&e.$state.go(e._stateAfterLogout),e.$rootScope.$emit("user:logout")})}},{key:"onLogin",value:function(e){return this.$rootScope.$on("user:login",e)}},{key:"onLogout",value:function(e){return this.$rootScope.$on("user:logout",e)}}]),e}();exports["default"]=r},328:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t,n,i){"ngInject";(0,a["default"])(this,e),this.$resource=t,this.dashJSrv=i,this.Stream=t(n.API_URL+"/media/:id",{id:"@id"}),this.list=[],this.currentVideoId="",this.$resource=t,this.ENV=n}return e.$inject=["$resource","ENV","dashJS"],(0,l["default"])(e,[{key:"getStream",value:function(e){return this.Stream.get({id:e}).$promise}},{key:"playVideo",value:function(e){var t=this;this.currentVideoId=e,this.getStream(e).then(function(e){t.dashJSrv.init(e.url,!0)})}},{key:"getVideoMetadata",value:function(e){return this.$resource(this.ENV.API_URL+"/videometadata").query({videoId:e}).$promise}},{key:"getMission",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$resource(this.ENV.API_URL+"/mission").query(e).$promise}}]),e}();exports["default"]=r},329:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t){"ngInject";(0,a["default"])(this,e),this.$mdDialog=t}return e.$inject=["$mdDialog"],(0,l["default"])(e,[{key:"showAlert",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"Interesting fact...":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"OK":arguments[2];this.$mdDialog.show(this.$mdDialog.alert().parent(angular.element(document.getElementById("map-main"))).clickOutsideToClose(!0).title(t).textContent(e).ariaLabel("Alert").ok(n))}},{key:"showPrompt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?"":arguments[3],a=arguments.length<=4||void 0===arguments[4]?"OK":arguments[4],o=arguments.length<=5||void 0===arguments[5]?"Cancel":arguments[5],l=this.$mdDialog.prompt().title(e).textContent(t).placeholder(n).ariaLabel(n).initialValue(i).ok(a).cancel(o);return this.$mdDialog.show(l)}},{key:"showConfirm",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?"":arguments[2],i=arguments.length<=3||void 0===arguments[3]?"OK":arguments[3],a=arguments.length<=4||void 0===arguments[4]?"Cancel":arguments[4],o=this.$mdDialog.confirm().title(e).textContent(t).ariaLabel(n).ok(i).cancel(a);return this.$mdDialog.show(o)}}]),e}();exports["default"]=r},330:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(){(0,a["default"])(this,e),this.list={}}return(0,l["default"])(e,[{key:"add",value:function(e){this.isAdded(e)||(this.list[e.id]=e)}},{key:"remove",value:function(e){this.isAdded(e)&&delete this.list[e.id]}},{key:"isAdded",value:function(e){return!s["default"].isUndefined(this.list[e.id])}}]),e}();exports["default"]=u},333:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(334),l=n(o),r=t(342),s=n(r),u=t(350),d=n(u),c=a["default"].module("app.common",[l["default"].name,s["default"].name]).factory({safeApply:d["default"]});exports["default"]=c},334:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(335),s=n(r),u=a["default"].module("navbar",[l["default"]]).component("navbar",s["default"]);exports["default"]=u},335:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(336),a=n(i),o=t(337),l=n(o);t(338);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},336:function(e,exports){e.exports='<md-toolbar class="md-toolbar-slim">\n  <div class="md-toolbar-tools">\n    <md-menu>\n      <md-button class="md-icon-button"\n                 aria-label="Left panel"\n                 ng-click="vm.openMenu($mdOpenMenu, $event)">\n        <md-icon class="material-icons">menu</md-icon>\n      </md-button>\n\n      <md-menu-content width="4">\n        <!--<md-menu-item>\n          <md-button ng-click="vm.map.polygon.toggle()">\n            <md-icon class="material-icon">timeline</md-icon>\n            <span ng-if="!vm.map.polygon.enabled">Start polygon tool</span>\n            <span ng-if="vm.map.polygon.enabled">Stop polygon tool</span>\n          </md-button>\n        </md-menu-item>-->\n\n        <!--<md-menu-item>\n          <md-button ng-click="vm.map.searchByPolygon()">\n            <md-icon class="material-icon">terrain</md-icon>\n            <span>Search by Polygon</span>\n          </md-button>\n        </md-menu-item>-->\n\n        <!--<md-menu-item>\n          <md-button ng-click="vm.map.setStreamSamples()">\n            <md-icon class="material-icon">view_stream</md-icon>\n            <span>Set stream samples</span>\n          </md-button>\n        </md-menu-item>-->\n\n        <!--<md-menu-item>\n          <md-button ng-click="vm.map.circle.toggle()">\n            <md-icon class="material-icon">data_usage</md-icon>\n            <span ng-if="!vm.map.circle.enabled">Start adding circles</span>\n            <span ng-if="vm.map.circle.enabled">Stop adding circles</span>\n          </md-button>\n        </md-menu-item>-->\n\n      </md-menu-content>\n\n    </md-menu>\n\n\n    <md-button ui-sref="auth.map">Map</md-button>\n    <span flex></span>\n    <div class="login-block"><user-login></user-login></div>\n  </div>\n</md-toolbar>\n'},337:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t,n,i){"ngInject";(0,a["default"])(this,e),this.map=n,this.$mdSidenav=t,this.missionSrv=i}return e.$inject=["$mdSidenav","MapService","MissionService"],(0,l["default"])(e,[{key:"openMenu",value:function(e,t){e(t)}}]),e}();exports["default"]=r},338:function(e,exports,t){var n=t(339);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},339:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Roboto);",""]),exports.push([e.id,"body{height:100%;font:62.5% Roboto,sans-serif}body .mt30{margin-top:30px!important}body .mt10{margin-top:10px!important}body p{font-weight:400}body md-dialog input,body p{font-size:16px}.navbar{color:#fff;background-color:#0277bd;padding:1rem;overflow:hidden}.navbar .login-block{float:right}.navbar a{color:#f5f5f5;text-decoration:none}.navbar .nav-links{margin:0;padding:0;float:left}.navbar .nav-links li{float:left;display:inline;margin-right:15px}.navbar .logged-name,.navbar a{font-size:1.5rem}.navbar .logged-name{font-style:italic;margin-right:10px}",""])},342:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(343),l=n(o),r=t(344),s=n(r),u=a["default"].module("user",[]).service("User",l["default"]).component("userLogin",s["default"]);exports["default"]=u},343:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(){"ngInject";(0,a["default"])(this,e)}return(0,l["default"])(e,[{key:"getEmail",value:function(){}},{key:"getName",value:function(){}},{key:"getId",value:function(){}}]),e}();exports["default"]=r},344:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(345),a=n(i),o=t(346),l=n(o);t(347);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},345:function(e,exports){e.exports='<div layout="row">\n  <div flex="none">\n    <md-button ng-if="!vm.auth.isAuthenticated()" class="md-accent" ng-click="vm.auth.authenticate(\'google\')">Sign In Google</md-button>\n    <md-button ng-if="!vm.auth.isAuthenticated()" class="md-accent" ng-click="vm.auth.authenticate(\'adfs\')">Sign In ADFS</md-button>\n    <md-button ng-if="vm.auth.isAuthenticated()" class="md-accent" ng-click="vm.auth.logout()">Logout</md-button>\n  </div>\n</div>\n'},346:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=function l(e){"ngInject";(0,a["default"])(this,l),this.auth=e};o.$inject=["Auth"],exports["default"]=o},347:function(e,exports,t){var n=t(348);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},348:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".customGglBtn{display:inline-block;background:#fff;color:#444;border:thin solid #888;box-shadow:1px 1px 1px gray;white-space:nowrap}.customGglBtn:hover{cursor:pointer}span.label{font-family:serif;font-weight:400}span.icon{background:url("+t(349)+") transparent 5px 50% no-repeat;width:30px;height:25px}span.buttonText,span.icon{display:inline-block;vertical-align:middle}span.buttonText{padding-left:5px;padding-right:20px;font-size:14px;font-weight:700;font-family:Roboto,sans-serif}",""])},349:function(e,exports,t){e.exports=t.p+"assets/client/app/common/user/img/g-normal.1344fd.png"},350:function(e,exports){"use strict";function t(e){"ngInject";return function(t){var n=e.$root.$$phase;"$apply"==n||"$digest"==n?t&&e.$eval(t):t?e.$apply(t):e.$apply()}}t.$inject=["$rootScope"],Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=t},351:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(352),l=n(o),r=t(358),s=n(r),u=t(364),d=n(u),c=t(390),m=n(c),f=t(499),p=n(f),v=t(534),h=n(v),g=t(540),y=n(g),b=t(546),_=n(b),j=t(633),x=n(j),M=t(639),k=n(M),S=a["default"].module("app.components",[l["default"].name,_["default"].name,s["default"].name,d["default"].name,m["default"].name,p["default"].name,y["default"].name,x["default"].name,h["default"].name,k["default"].name]);exports["default"]=S},352:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(353),s=n(r),u=a["default"].module("home",[l["default"]]).config(["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";t.otherwise("/"),e.state("home",{url:"/",template:"<home></home>"})}]).component("home",s["default"]);exports["default"]=u},353:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(354),a=n(i),o=t(355),l=n(o);t(356);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},354:function(e,exports){e.exports='<div layout="column" layout-fill>\n  <navbar flex="none"></navbar>\n\n  <div flex="auto" layout="column" layout-align="center center">\n    <h1>Welcome to Replay project!</h1>\n    <md-button class="md-primary md-raised md-hue-2" ui-sref="auth.map">checkout  map</md-button>\n  </div>\n</div>\n'},355:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=function l(){(0,a["default"])(this,l),this.name="home"};exports["default"]=o},356:function(e,exports,t){var n=t(357);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},357:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".home{color:red}",""])},358:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(359),s=n(r),u=a["default"].module("maplayout",[l["default"]]).config(["$stateProvider",function(e){"ngInject";e.state("auth.map",{url:"/map",template:"<maplayout></maplayout>"})}]).component("maplayout",s["default"]);exports["default"]=u},359:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(360),a=n(i),o=t(361),l=n(o);t(362);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},360:function(e,exports){e.exports='<div class="map-layout" layout="row" layout-fill>\n\n  <md-sidenav layout="column" layout-fill\n              class="md-sidenav-left md-whiteframe-z2"\n              md-component-id="left"\n              md-is-locked-open="$mdMedia(\'gt-sm\')">\n    <md-content flex>\n      <md-tabs md-dynamic-height md-border-bottom class="md-primary md-hue-1">\n        <md-tab\n          label="search"\n          ui-sref="auth.map"\n          md-active="vm.$state.is(\'auth.map\')">\n          <md-content class="">\n            <filter-form flex="none"></filter-form>\n            <filter-result flex="none"></filter-result>\n          </md-content>\n        </md-tab>\n        <md-tab\n          label="playlist"\n          ui-sref="auth.map.playlist"\n          md-active="vm.$state.is(\'auth.map.playlist\') || vm.$state.is(\'auth.map.playlistItems\')">\n          <play-list></play-list>\n        </md-tab>\n      </md-tabs>\n    </md-content>\n\n\n  </md-sidenav>\n\n\n  <div layout="column" flex="auto">\n    <navbar flex="none"></navbar>\n\n    <div class="viewport" flex="auto">\n      <map></map>\n      <player></player>\n    </div>\n  </div>\n\n</div>\n'},361:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=function l(e){"ngInject";(0,a["default"])(this,l),this.name="maplayout",this.$state=e};o.$inject=["$state"],exports["default"]=o},362:function(e,exports,t){var n=t(363);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},363:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".map-layout .viewport{background-color:#eaffeb;position:relative}",""])},364:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(365);n(r);t(366);var s=t(370),u=(n(s),t(371)),d=(n(u),t(376));n(d);t(377);var c=t(379),m=n(c),f=t(384),p=n(f),v=t(388),h=n(v),g=a["default"].module("map",[l["default"]]).service({MapService:p["default"]}).service({TrackService:h["default"]}).component("map",m["default"]);exports["default"]=g},379:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(380),a=n(i),o=t(381),l=n(o);t(382);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},380:function(e,exports){e.exports='<div id="map-main"></div>\n'},381:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t,n){"ngInject";(0,a["default"])(this,e),this.$timeout=t,this.mapSrv=n}return e.$inject=["$timeout","MapService"],(0,l["default"])(e,[{key:"$onInit",value:function(){var e=this;this.$timeout(function(){e.mapSrv.init()})}}]),e}();exports["default"]=r},382:function(e,exports,t){var n=t(383);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},383:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"#map-main{position:absolute;left:0;right:0;top:0;bottom:0}#map-main .info{padding:6px 8px;font:14px/16px Arial,Helvetica,sans-serif;background:#fff;background:hsla(0,0%,100%,.8);box-shadow:0 0 15px rgba(0,0,0,.2);border-radius:5px}#map-main .info h4{margin:0 0 5px;color:#777}",""])},384:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(385),a=n(i),o=t(308),l=n(o),r=t(309),s=n(r),u=t(387),d=n(u),c=t(331),m=n(c),f=function(){function e(t,n,i,a){"ngInject";(0,l["default"])(this,e),this._mapDeferred=a.defer(),this.mapId="map-main",this.startPoint=[32.08088,34.78057],this.zoom=13,this.$mdDialog=t,this.missionSrv=n,this.filterFormSrv=i,this._movingGroup=new L.FeatureGroup,this._boundingGroup=new L.FeatureGroup,this.geojson=null,this._mbUrl="https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw"}return e.$inject=["$mdDialog","MissionService","FilterFormService","$q"],(0,s["default"])(e,[{key:"init",value:function(){var e,t,n,i;e=L.tileLayer(this._mbUrl,{id:"mapbox.light",attribution:"Replay"}),t=L.tileLayer(this._mbUrl,{id:"mapbox.streets",attribution:"Replay"}),this.map=L.map(this.mapId,{center:this.startPoint,zoom:this.zoom,layers:[t,this._movingGroup,this._boundingGroup]}),n={Grayscale:e,Streets:t},i={"Bounding shape":this._boundingGroup},this.ctrlInfo=L.control(),this.ctrlInfo.onAdd=function(e){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},this.ctrlInfo.update=function(e){this._div.innerHTML="<h4>Search details</h4>"+(e?"<b>Name: </b><br /><b>ID: </b>"+e._id:"Do some search then hover on result")},this.ctrlInfo.addTo(this.map),L.control.layers(n,i).addTo(this.map),this.drawSearchSrv=new d["default"](this.map),this._mapDeferred.resolve(this.map)}},{key:"getMap",value:function(){return this._mapDeferred.promise}},{key:"searchVideo",value:function(){var e=this,t=(this.map,{}),n=this.filterFormSrv.values;this.drawSearchSrv.isReady()&&(t.boundingShapeType="Polygon",t.boundingShapeCoordinates=(0,a["default"])(this.drawSearchSrv.getFrame().geometry)),m["default"].isUndefined(n.source)||(t.sourceId=n.source),m["default"].isEmpty(n.tag)||(t.tagsIds=(0,a["default"])(n.tag)),m["default"].isEmpty(n.timeRange)||(m["default"].isUndefined(n.timeRange.from)||(t.fromVideoTime=n.timeRange.from),m["default"].isUndefined(n.timeRange.to)||(t.toVideoTime=n.timeRange.to)),m["default"].isEmpty(n.length)||(m["default"].isUndefined(n.length.min)||(t.minVideoDuration=n.length.min),m["default"].isUndefined(n.length.max)||(t.maxVideoDuration=n.length.max)),this._boundingGroup.clearLayers(),this.missionSrv.getMission(t).then(function(t){e.missionSrv.list=t,m["default"].each(t,function(t){e.renderBoundingGroup(t.boundingPolygon)})})}},{key:"renderBoundingGroup",value:function(e){this.geojson=L.geoJson(e,{style:this.style.bind(this),onEachFeature:this.onEachFeature.bind(this)}).bindLabel("Bounding polygon").addTo(this._boundingGroup)}},{key:"clearMovingGroup",value:function(){this._movingGroup.clearLayers()}},{key:"renderMovingGroup",value:function(e){this.clearMovingGroup(),this.geojson=L.geoJson(e,{style:this.style.bind(this),onEachFeature:this.onEachFeature.bind(this)}).bindLabel("Moving object").addTo(this._movingGroup)}},{key:"style",value:function(e){var t="MultiPolygon"==e.geometry.type;return{weight:2,opacity:1,color:"white",dashArray:t?"3":"",fillOpacity:t?.3:1,fillColor:t?"green":"magenta"}}},{key:"highlightFeature",value:function(e){var t=e.target;t.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7}),L.Browser.ie||L.Browser.opera||t.bringToFront(),this.ctrlInfo.update(t.feature.properties)}},{key:"resetHighlight",value:function(e){this.geojson.resetStyle(e.target),this.ctrlInfo.update()}},{key:"zoomToFeature",value:function(e){this.map.fitBounds(e.target.getBounds())}},{key:"onEachFeature",value:function(e,t){t.on({mouseover:this.highlightFeature.bind(this),mouseout:this.resetHighlight.bind(this),click:this.zoomToFeature.bind(this)})}},{key:"convertToFeatures",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i={type:"FeatureCollection",features:[]};return m["default"].each(e,function(e){i.features.push({type:"Feature",properties:m["default"].merge(n,m["default"].pick(e,["_id","sourceId","videoId","timestamp","data","sensorPosition"])),geometry:{type:t.capitalizeFirstLetter(e.sensorTrace.type),coordinates:e.sensorTrace.coordinates}})}),i}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}();exports["default"]=f},387:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(t){(0,a["default"])(this,e),this.enabled=!1,this.activeTool=null,this.map=t,this._drawGroup=new L.FeatureGroup,this._frame=null,this._activeHandler=null,L.drawLocal.draw.handlers.rectangle.tooltip.start="Click and drag to define search frame",L.drawLocal.draw.handlers.circle.tooltip.start="Click and drag to define search circle",L.drawLocal.draw.handlers.simpleshape.tooltip.end="Release mouse to finish",this.init()}return(0,l["default"])(e,[{key:"isReady",value:function(){return!s["default"].isEmpty(this._frame)}},{key:"init",value:function(){var e=this;this.map.addLayer(this._drawGroup),this.map.on("draw:created",function(t){t.layerType;e._frame=t.layer,e._drawGroup.addLayer(e._frame)}),this.map.on("draw:drawstart",function(t){t.layerType;e.removeFrame()})}},{key:"getFrame",value:function(){if(!this.isReady())return void console.error("DrawSearch: search shape is not defined");var e={};switch(e.type=this.activeTool,e.type){case"circle":break;default:e.geometry=this._frame.toGeoJSON().geometry.coordinates}return e}},{key:"startTool",value:function(e){switch(s["default"].isEmpty(this._activeHandler)||this.activeHandlerDisable(),e){case"rectangle":this._activeHandler=new L.Draw.Rectangle(this.map);break;case"polygon":this._activeHandler=new L.Draw.Polygon(this.map);break;case"circle":this._activeHandler=new L.Draw.Circle(this.map)}this.activeHandlerEnable()}},{key:"removeFrame",value:function(){this._drawGroup.clearLayers(),this._frame=null}},{key:"activeHandlerDisable",value:function(){this._activeHandler.disable()}},{key:"activeHandlerEnable",value:function(){this._activeHandler.enable()}}]),e}();exports["default"]=u},388:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(t,n,i){"ngInject";var o=this;(0,a["default"])(this,e),this.mapSrv=t,this.dashJSrv=n,this._trackGroup=new L.FeatureGroup,this.marker=null,this.$rootScope=i,this.mapSrv.getMap().then(function(e){o.init()}),i.$on("dashjs:close",function(e,t){o.clearTrackGroup(),o.mapSrv.clearMovingGroup()})}return e.$inject=["MapService","dashJS","$rootScope"],(0,l["default"])(e,[{key:"init",value:function(){this.map=this.mapSrv.map,this._trackGroup.addTo(this.map),this.dashJSrv.player.on(this.dashJSrv.dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,this.metadataLoaded.bind(this))}},{key:"clearTrackGroup",value:function(){this._trackGroup.clearLayers()}},{key:"metadataLoaded",value:function(e){var n=this;if(!s["default"].isEmpty(this.dashJSrv.view.textTracks)){this.clearTrackGroup();var i,a,o,l,r=this.dashJSrv.view.textTracks[0],u=[],d=this;r.mode="hidden",s["default"].each(r.cues,function(e){i=JSON.parse(e.text),a=i.sensorTrace.coordinates[0],o=n.getLatLngCenter(a),l||(l=[a[0][1],a[0][0]]),u.push(o)}),l&&(this.marker=L.marker(l,{icon:L.icon({iconUrl:t(389),iconSize:[32,32]})}).addTo(this._trackGroup),this.map.panTo(l)),s["default"].isEmpty(u)||L.polyline(u,{color:"red"}).addTo(this._trackGroup),r.oncuechange=function(){var e=this.activeCues[0],t=void 0,n=void 0;s["default"].isUndefined(e)||(t=JSON.parse(e.text),n=d.getLatLngCenter(t.sensorTrace.coordinates[0]),d.mapSrv.renderMovingGroup({type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t.sensorTrace}]}),d.marker.setLatLng(n),d.map.panTo(n))}}}},{key:"rad2degr",value:function(e){return 180*e/Math.PI}},{key:"degr2rad",value:function(e){return e*Math.PI/180}},{key:"getLatLngCenter",value:function(e){for(var t=1,n=0,i=0,a=0,o=0,l=0;l<e.length;l++){var r=this.degr2rad(e[l][t]),s=this.degr2rad(e[l][n]);i+=Math.cos(r)*Math.cos(s),a+=Math.cos(r)*Math.sin(s),o+=Math.sin(r)}var u=i/e.length,d=a/e.length,c=o/e.length,s=Math.atan2(d,u),m=Math.sqrt(u*u+d*d),r=Math.atan2(c,m);return[this.rad2degr(r),this.rad2degr(s)]}}]),e}();exports["default"]=u},389:function(e,exports,t){e.exports=t.p+"assets/client/app/components/map/assets/icon_dron.7f085f.png"},390:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(391),s=n(r),u=a["default"].module("filterResult",[l["default"]]).component("filterResult",s["default"]);exports["default"]=u},391:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(392),a=n(i),o=t(393),l=n(o);t(497);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},392:function(e,exports){e.exports='<div class="video-results">\n  <md-toolbar class="md-hue-3 md-toolbar-slim">\n    <h2 class="md-toolbar-tools">Query Results ({{vm.missionSrv.list.length}})</h2>\n  </md-toolbar>\n\n  <table>\n    <thead>\n    <tr>\n      <td>Title</td>\n      <td>Source</td>\n      <td>Length</td>\n      <td></td>\n    </tr>\n    </thead>\n\n    <tbody>\n    <tr\n      data-ng-repeat="video in vm.missionSrv.list"\n      ng-click="vm.setActiveRow($event)"\n      ng-class="{ \'playing-video\': video.id == vm.missionSrv.currentVideoId }">\n      <td>{{video.name}}</td>\n      <td>{{video.sourceId}}</td>\n      <td>{{vm.moment.utc(video.providerData.msDuration).format("HH:mm:ss")}}</td>\n      <td class="td-video-panel"><video-panel data-video="video"></video-panel></td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n'},393:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(394),s=n(r),u=function(){function e(t){"ngInject";(0,a["default"])(this,e),this.missionSrv=t,this.moment=s["default"]}return e.$inject=["MissionService"],(0,l["default"])(e,[{key:"setActiveRow",value:function(e){if(e.target){var t=angular.element(e.target).parent();t.parent().find("tr").removeClass("active"),t.addClass("active")}}}]),e}();exports["default"]=u},395:function(e,exports,t){function n(e){return t(i(e))}function i(e){return a[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var a={"./af":396,"./af.js":396,"./ar":397,"./ar-ma":398,"./ar-ma.js":398,"./ar-sa":399,"./ar-sa.js":399,"./ar-tn":400,"./ar-tn.js":400,"./ar.js":397,"./az":401,"./az.js":401,"./be":402,"./be.js":402,"./bg":403,"./bg.js":403,"./bn":404,"./bn.js":404,"./bo":405,"./bo.js":405,"./br":406,"./br.js":406,"./bs":407,"./bs.js":407,"./ca":408,"./ca.js":408,"./cs":409,"./cs.js":409,"./cv":410,"./cv.js":410,"./cy":411,"./cy.js":411,"./da":412,"./da.js":412,"./de":413,"./de-at":414,"./de-at.js":414,"./de.js":413,"./dv":415,"./dv.js":415,"./el":416,"./el.js":416,"./en-au":417,"./en-au.js":417,"./en-ca":418,"./en-ca.js":418,"./en-gb":419,"./en-gb.js":419,"./en-ie":420,"./en-ie.js":420,"./en-nz":421,"./en-nz.js":421,"./eo":422,"./eo.js":422,"./es":423,"./es-do":424,"./es-do.js":424,"./es.js":423,"./et":425,"./et.js":425,"./eu":426,"./eu.js":426,"./fa":427,"./fa.js":427,"./fi":428,"./fi.js":428,"./fo":429,"./fo.js":429,"./fr":430,"./fr-ca":431,"./fr-ca.js":431,"./fr-ch":432,"./fr-ch.js":432,"./fr.js":430,"./fy":433,"./fy.js":433,"./gd":434,"./gd.js":434,"./gl":435,"./gl.js":435,"./he":436,"./he.js":436,"./hi":437,"./hi.js":437,"./hr":438,"./hr.js":438,"./hu":439,"./hu.js":439,"./hy-am":440,"./hy-am.js":440,"./id":441,"./id.js":441,"./is":442,"./is.js":442,"./it":443,"./it.js":443,"./ja":444,"./ja.js":444,"./jv":445,"./jv.js":445,"./ka":446,"./ka.js":446,"./kk":447,"./kk.js":447,"./km":448,"./km.js":448,"./ko":449,"./ko.js":449,"./ky":450,"./ky.js":450,"./lb":451,"./lb.js":451,"./lo":452,"./lo.js":452,"./lt":453,"./lt.js":453,"./lv":454,"./lv.js":454,"./me":455,"./me.js":455,"./mk":456,"./mk.js":456,"./ml":457,"./ml.js":457,"./mr":458,"./mr.js":458,"./ms":459,"./ms-my":460,"./ms-my.js":460,"./ms.js":459,"./my":461,
"./my.js":461,"./nb":462,"./nb.js":462,"./ne":463,"./ne.js":463,"./nl":464,"./nl.js":464,"./nn":465,"./nn.js":465,"./pa-in":466,"./pa-in.js":466,"./pl":467,"./pl.js":467,"./pt":468,"./pt-br":469,"./pt-br.js":469,"./pt.js":468,"./ro":470,"./ro.js":470,"./ru":471,"./ru.js":471,"./se":472,"./se.js":472,"./si":473,"./si.js":473,"./sk":474,"./sk.js":474,"./sl":475,"./sl.js":475,"./sq":476,"./sq.js":476,"./sr":477,"./sr-cyrl":478,"./sr-cyrl.js":478,"./sr.js":477,"./ss":479,"./ss.js":479,"./sv":480,"./sv.js":480,"./sw":481,"./sw.js":481,"./ta":482,"./ta.js":482,"./te":483,"./te.js":483,"./th":484,"./th.js":484,"./tl-ph":485,"./tl-ph.js":485,"./tlh":486,"./tlh.js":486,"./tr":487,"./tr.js":487,"./tzl":488,"./tzl.js":488,"./tzm":489,"./tzm-latn":490,"./tzm-latn.js":490,"./tzm.js":489,"./uk":491,"./uk.js":491,"./uz":492,"./uz.js":492,"./vi":493,"./vi.js":493,"./x-pseudo":494,"./x-pseudo.js":494,"./zh-cn":495,"./zh-cn.js":495,"./zh-tw":496,"./zh-tw.js":496};n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id=395},497:function(e,exports,t){var n=t(498);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},498:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".video-results .video-title{text-align:center;margin:0 0 15px;padding:10px 0}.video-results .video-panel{display:none}.video-results table{width:100%;border-collapse:collapse}.video-results table thead td{font-weight:700}.video-results table .td-video-panel{width:24px}.video-results table tbody td{padding:0;height:72px}.video-results table tbody tr.active .video-panel{display:block}.video-results table tbody tr.active td,.video-results table tbody tr:hover td{background-color:#e3e0e0}",""])},499:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(500),l=n(o),r=t(505),s=n(r),u=t(511),d=n(u),c=t(517),m=n(c),f=t(524),p=n(f),v=t(533),h=n(v),g=a["default"].module("filterForm",[s["default"].name,d["default"].name,p["default"].name,m["default"].name]).service({FilterFormService:h["default"]}).component("filterForm",l["default"]);exports["default"]=g},500:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(501),a=n(i),o=t(502),l=n(o);t(503);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},501:function(e,exports){e.exports='<div class="filter-form">\n  <md-toolbar class="md-hue-3 md-toolbar-slim">\n    <div class="md-toolbar-tools">\n      <h2>Query</h2>\n      <span flex></span>\n\n\n      <md-menu>\n        <md-button class="md-icon-button"\n                   aria-label="Add new filter"\n                   flex="none"\n                   ng-click="$mdOpenMenu($event)"\n                   ng-disabled="vm.filterFormSrv.isEmptyAvailableFilters()">\n          <md-icon class="material-icons">add_circle_outline</md-icon>\n        </md-button>\n\n        <md-menu-content width="4">\n          <md-menu-item ng-repeat="(controlType, avFilter) in vm.filterFormSrv.availableFilters">\n            <md-button ng-if="!vm.filterFormSrv.oneAvailableFilterLeft()"\n              ng-click="vm.filterFormSrv.addFilter(controlType)"\n              md-prevent-menu-close>\n              <md-icon class="material-icon">{{avFilter.menuIcon}}</md-icon>\n              <span>{{avFilter.label}}</span>\n            </md-button>\n\n            <md-button ng-if="vm.filterFormSrv.oneAvailableFilterLeft()"\n                       ng-click="vm.filterFormSrv.addFilter(controlType)">\n              <md-icon class="material-icon">{{avFilter.menuIcon}}</md-icon>\n              <span>{{avFilter.label}}</span>\n            </md-button>\n\n          </md-menu-item>\n\n        </md-menu-content>\n\n      </md-menu>\n\n\n    </div>\n\n  </md-toolbar>\n\n\n  <div class="filter-form-content">\n    <form name="filterForm">\n      <div ng-repeat="(controlType, actFilter) in vm.filterFormSrv.activeFilters"\n           ng-switch="controlType"\n           class="filter-item"\n           layout="row"\n           layout-align="center center">\n        <filter-selectbox ng-switch-default\n                          flex\n                          label="{{actFilter.label}}"\n                          label-icon="{{actFilter.menuIcon}}"\n                          control-type="{{controlType}}"\n                          on-change="vm.onChange(controlType, value)"\n                          on-remove="vm.filterFormSrv.removeFilter(controlType)"></filter-selectbox>\n\n        <filter-graphic-button ng-switch-when="shapeType"\n                          flex\n                          label="{{actFilter.label}}"\n                          label-icon="{{actFilter.menuIcon}}"\n                          control-type="{{controlType}}"\n                          on-change="vm.onChange(controlType, value)"\n                          on-remove="vm.filterFormSrv.removeFilter(controlType)"></filter-graphic-button>\n\n        <filter-num-interval\n                          ng-switch-when="length"\n                          flex\n                          label="{{actFilter.label}}"\n                          label-icon="{{actFilter.menuIcon}}"\n                          label-min="Min"\n                          label-max="Max"\n                          control-type="{{controlType}}"\n                          on-change="vm.onChange(controlType, value)"\n                          on-remove="vm.filterFormSrv.removeFilter(controlType)"></filter-num-interval>\n\n        <filter-time-range\n                          ng-switch-when="timeRange"\n                          flex\n                          label="{{actFilter.label}}"\n                          label-icon="{{actFilter.menuIcon}}"\n                          label-from="Start Date/Time"\n                          label-to="End Date/Time"\n                          control-type="{{controlType}}"\n                          on-change="vm.onChange(controlType, value)"\n                          on-remove="vm.filterFormSrv.removeFilter(controlType)"></filter-time-range>\n      </div>\n\n      <div layout="row" layout-align="center center">\n        <span flex></span>\n        <md-button ng-disabled="!vm.searchable()" ng-click="vm.search()" flex="none" ng-hide="vm.filterFormSrv.isEmptyActiveFilters()" class="md-primary md-raised">Search</md-button>\n      </div>\n    </form>\n\n    <p class="filter-form-note" ng-show="vm.filterFormSrv.isEmptyActiveFilters()">No filters selected</p>\n  </div>\n\n</div>\n'},502:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(t,n){"ngInject";(0,a["default"])(this,e),this.filterFormSrv=t,this.mapSrv=n}return e.$inject=["FilterFormService","MapService"],(0,l["default"])(e,[{key:"onChange",value:function(e,t){if(this.filterFormSrv.values[e]=t,s["default"].isArray(t)&&s["default"].isEmpty(t)&&delete this.filterFormSrv.values[e],s["default"].isObject(t)){var n=!1;s["default"].each(t,function(e){e&&(n=!0)}),n||delete this.filterFormSrv.values[e]}}},{key:"search",value:function(){this.mapSrv.searchVideo(),this.mapSrv.drawSearchSrv.removeFrame()}},{key:"searchable",value:function(){var e=this,t=!1,n=this.filterFormSrv.values;return s["default"].each(n,function(i,a){switch(a){case"shapeType":e.mapSrv.drawSearchSrv.isReady()&&(t=!0);break;default:s["default"].isEmpty(n)||(t=!0)}}),t}}]),e}();exports["default"]=u},503:function(e,exports,t){var n=t(504);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},504:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".filter-form-note{text-align:center;font-size:14px}.filter-form-content{padding-right:10px;padding-bottom:10px;font-size:12px}",""])},505:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(506),s=n(r),u=a["default"].module("filterSelectbox",[l["default"]]).component("filterSelectbox",s["default"]);exports["default"]=u},506:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(507),a=n(i),o=t(508),l=n(o);t(509);var r={restrict:"E",bindings:{controlType:"@",label:"@",labelIcon:"@",onChange:"&",onRemove:"&"},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},507:function(e,exports){e.exports='<div layout="row" layout-align="center center">\n  <md-button class="md-icon-button md-primary md-hue-1 ml0"\n             aria-label="Remove filter"\n             flex="none"\n             ng-click="vm.removeFilter(vm.controlType)">\n    <md-icon class="material-icons">remove_circle_outline</md-icon>\n  </md-button>\n\n  <label flex="25">{{vm.label}}</label>\n\n  <md-input-container flex="75">\n    <md-icon class="material-icon">{{vm.labelIcon}}</md-icon>\n    <md-select ng-if="!vm.multiple" ng-change="vm.changed()" ng-model="vm.value" placeholder="{{vm.label}}">\n      <md-option ng-repeat="opt in vm.options" value="{{opt.value}}">\n        {{opt.name}}\n      </md-option>\n    </md-select>\n\n    <md-select ng-if="vm.multiple" multiple ng-change="vm.changed()" ng-model="vm.value" placeholder="{{vm.label}}">\n      <md-option ng-repeat="opt in vm.options" value="{{opt.value}}">\n        {{opt.name}}\n      </md-option>\n    </md-select>\n  </md-input-container>\n</div>\n'},508:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(t,n){"ngInject";var i=this;switch((0,a["default"])(this,e),this.options=[],this.value="",this.rSource=t(n.API_URL+"/source/:id",{id:"@id"}),this.rTag=t(n.API_URL+"/tag/:id",{id:"@id"}),this.multiple=!1,this.controlType){case"source":this.getSources().then(function(e){s["default"].each(e,function(e){i.options.push({name:e.sourceName,value:e.sourceID})})});break;case"tag":this.multiple=!0,this.getTags().then(function(e){s["default"].each(e,function(e){i.options.push({name:e.title,value:e._id})})});break;default:this.options=[{name:"wildcamps.com",value:"wildcamps.com"},{name:"supercamps.com",value:"supercamps.com"},{name:"megacamps.com",value:"megacamps.com"},{name:"coolcamps.com",value:"coolcamps.com"}]}}return e.$inject=["$resource","ENV"],(0,l["default"])(e,[{key:"changed",value:function(){this.onChange({controlType:this.controlType,value:this.value})}},{key:"removeFilter",value:function(e){this.onRemove({controlType:e})}},{key:"getSources",value:function(){return this.rSource.query({}).$promise}},{key:"getTags",value:function(){return this.rTag.query({}).$promise}}]),e}();exports["default"]=u},509:function(e,exports,t){var n=t(510);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},510:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".filter-item{margin:0 0 10px}.filter-item label{font-size:14px}.filter-item md-select{font-size:14px;margin-left:30px}.filter-item md-input-container{margin-top:5px;margin-bottom:5px}",""])},511:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(512),s=n(r),u=a["default"].module("filterNumInterval",[l["default"]]).component("filterNumInterval",s["default"]);exports["default"]=u},512:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(513),a=n(i),o=t(514),l=n(o);t(515);var r={restrict:"E",bindings:{controlType:"@",label:"@",labelIcon:"@",labelMin:"@",labelMax:"@",valueMin:"@",valueMax:"@",onChange:"&",onRemove:"&"},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},513:function(e,exports){e.exports='<div layout="row" layout-align="center center">\n  <md-button class="md-icon-button md-primary md-hue-1 ml0"\n             aria-label="Remove filter"\n             flex="none"\n             ng-click="vm.onRemove({controlType: vm.controlType})">\n    <md-icon class="material-icons">remove_circle_outline</md-icon>\n  </md-button>\n\n  <label flex="25">{{vm.label}}</label>\n\n  <div flex="75" layout="column">\n\n    <md-slider-container layout="row" layout-align="center center">\n      <span flex="none" class="slider-label">Min</span>\n      <md-slider flex="75" min="0" max="18000" step="10" ng-model="vm.valueMin" ng-change="vm.changed()" aria-label="Min" id="length-min-slider">\n      </md-slider>\n      <md-input-container flex="25">\n        <input type="number" ng-model="vm.valueMin" ng-change="vm.changed()" aria-label="Min" aria-controls="length-min-slider">\n      </md-input-container>\n    </md-slider-container>\n\n    <md-slider-container layout="row" layout-align="center center">\n      <span flex="none" class="slider-label">Max</span>\n      <md-slider flex="75" min="{{vm.valueMin}}" max="36000" step="10" ng-model="vm.valueMax" ng-change="vm.changed()" aria-label="Max" id="length-max-slider">\n      </md-slider>\n      <md-input-container flex="25">\n        <input type="number" ng-model="vm.valueMax" ng-change="vm.changed()" aria-label="Max" aria-controls="length-max-slider">\n      </md-input-container>\n    </md-slider-container>\n\n  </div>\n\n</div>\n'},514:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(){(0,a["default"])(this,e),this.valueMin=0,this.valueMax=3600,this.changed()}return(0,l["default"])(e,[{key:"changed",value:function(){this.valueMin>this.valueMax&&(this.valueMax=this.valueMin),this.onChange({controlType:this.controlType,value:{min:this.valueMin,max:this.valueMax}})}}]),e}();exports["default"]=r},515:function(e,exports,t){var n=t(516);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},516:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"filter-num-interval .slider-label{margin-right:10px;font-size:14px}filter-num-interval md-slider{margin-right:10px}",""])},517:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(518),l=n(o),r=a["default"].module("filterGraphicButton",[]).component("filterGraphicButton",l["default"]).config(["$mdIconProvider",function(e){"ngInject";e.iconSet("geometry",t(523),128)}]);exports["default"]=r},518:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(519),a=n(i),o=t(520),l=n(o);t(521);var r={restrict:"E",bindings:{controlType:"@",label:"@",labelIcon:"@",onChange:"&",onRemove:"&"},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},519:function(e,exports){e.exports='<div layout="row" layout-align="center center">\n  <md-button class="md-icon-button md-primary md-hue-1 ml0"\n             aria-label="Remove filter"\n             flex="none"\n             ng-click="vm.removeFilter(vm.controlType)">\n    <md-icon class="material-icons">remove_circle_outline</md-icon>\n  </md-button>\n\n  <label flex="25">{{vm.label}}</label>\n\n  <md-input-container flex="75">\n    <md-radio-group ng-model="vm.value" ng-change="vm.changed()">\n      <md-radio-button ng-repeat="opt in vm.options"\n                       ng-value="opt.value"\n                       title="{{opt.title}}"\n                       aria-label="{{opt.title}}">\n        <md-icon md-svg-icon="{{opt.icon}}"></md-icon>\n      </md-radio-button>\n    </md-radio-group>\n  </md-input-container>\n\n</div>\n'},520:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t,n){"ngInject";(0,a["default"])(this,e),this.options=null,this.value="",this.mapSrv=t,this.safeApply=n,this.init()}return e.$inject=["MapService","safeApply"],(0,l["default"])(e,[{key:"init",value:function(){var e=this;this.options=[{icon:"geometry:rectangle",value:"rectangle",title:"Rectangle"},{icon:"geometry:polygon",value:"polygon",title:"Polygon"},{icon:"geometry:circle",value:"circle",title:"Circle"}],this.mapSrv.map.on("draw:created",function(t){e.value=null,e.safeApply()})}},{key:"changed",value:function(){this.mapSrv.drawSearchSrv.startTool(this.value),this.onChange({controlType:this.controlType,value:this.value})}},{key:"removeFilter",value:function(e){this.mapSrv.drawSearchSrv.removeFrame(),this.mapSrv.drawSearchSrv.activeHandlerDisable(),this.onRemove({controlType:e})}}]),e}();exports["default"]=r},521:function(e,exports,t){var n=t(522);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},522:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"filter-graphic-button md-radio-button{display:inline}filter-graphic-button md-radio-button .md-label{margin-left:39px}filter-graphic-button md-radio-button md-icon{padding:4px;border-radius:3px}filter-graphic-button md-radio-button .md-container{display:none}filter-graphic-button md-radio-button.md-checked md-icon{color:#fff;background-color:#3f51b5}",""])},523:function(e,exports,t){e.exports=t.p+"assets/client/app/components/filterForm/filterGraphicButton/assets/geometry.946600.svg"},524:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(525),s=n(r),u=t(530),d=(n(u),t(531)),c=(n(d),a["default"].module("filterTimeRange",[l["default"],"ngMaterialDatePicker"]).component("filterTimeRange",s["default"]));exports["default"]=c},525:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(526),a=n(i),o=t(527),l=n(o);t(528);var r={restrict:"E",bindings:{controlType:"@",label:"@",labelIcon:"@",labelFrom:"@",labelTo:"@",valueFrom:"@",valueTo:"@",onChange:"&",onRemove:"&"},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},526:function(e,exports){e.exports='<div layout="row" layout-align="center center">\n  <md-button class="md-icon-button md-primary md-hue-1 ml0"\n             aria-label="Remove filter"\n             flex="none"\n             ng-click="vm.onRemove({controlType: vm.controlType})">\n    <md-icon class="material-icons">remove_circle_outline</md-icon>\n  </md-button>\n\n  <label flex="25">{{vm.label}}</label>\n\n  <div flex="75" layout="column">\n\n    <md-input-container class="mt10" layout="row" layout-align="center center">\n      <label></label>\n      <input mdc-datetime-picker\n             date="true"\n             time="true"\n             type="text"\n             placeholder="{{vm.labelFrom}}"\n             max-date="vm.valueTo"\n             ng-model="vm.valueFrom"\n      />\n    </md-input-container>\n\n    <md-input-container class="mt10" layout="row" layout-align="center center">\n      <label></label>\n      <input mdc-datetime-picker\n             date="true"\n             time="true"\n             type="text"\n             placeholder="{{vm.labelTo}}"\n             min-date="vm.valueFrom"\n             ng-model="vm.valueTo"\n      />\n    </md-input-container>\n\n  </div>\n\n</div>\n'},527:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t){"ngInject";var n=this;(0,a["default"])(this,e),this.$scope=t,this.valueFrom="",this.valueTo="",this.$scope.$watch(function(){return n.valueFrom},this.updateFrom.bind(this)),this.$scope.$watch(function(){return n.valueTo},this.updateTo.bind(this))}return e.$inject=["$scope"],(0,l["default"])(e,[{key:"updateFrom",value:function(e){this.onChange({controlType:this.controlType,value:{from:e,to:this.valueTo}})}},{key:"updateTo",value:function(e){this.onChange({controlType:this.controlType,value:{from:this.valueFrom,to:e}})}}]),e}();exports["default"]=r},528:function(e,exports,t){var n=t(529);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},529:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"body md-slider-container md-input-container input[type=number]{padding-left:0}body md-slider-container>:last-child:not(md-slider){margin-left:0}",""])},533:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(){(0,a["default"])(this,e),this.values={},this.activeFilters={},this.availableFilters={},this.filterList={source:{label:"Source",menuIcon:"input"},tag:{label:"Tag",menuIcon:"label"},copyright:{label:"Copyright",menuIcon:"copyright"},timeRange:{label:"Time range",menuIcon:"access_time"},length:{label:"Length, sec",menuIcon:"timelapse"},shapeType:{label:"Area shape",menuIcon:"my_location"}},this.availableFilters=s["default"].clone(this.filterList)}return(0,l["default"])(e,[{key:"addFilter",value:function(e){s["default"].isEmpty(this.activeFilters[e])&&(this.activeFilters[e]=this.filterList[e],delete this.availableFilters[e])}},{key:"removeFilter",value:function(e){s["default"].isEmpty(this.activeFilters[e])||(delete this.activeFilters[e],delete this.values[e],this.availableFilters[e]=this.filterList[e])}},{key:"isEmptyActiveFilters",value:function(){return s["default"].isEmpty(this.activeFilters)}},{key:"isEmptyAvailableFilters",value:function(){return s["default"].isEmpty(this.availableFilters)}},{key:"oneAvailableFilterLeft",value:function(){return 1==s["default"].size(this.availableFilters)}}]),e}();exports["default"]=u},534:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(535),s=n(r),u=a["default"].module("sidebar",[l["default"]]).component("sidebar",s["default"]);exports["default"]=u},535:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(536),a=n(i),o=t(537),l=n(o);t(538);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},536:function(e,exports){e.exports=""},537:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=function l(){(0,a["default"])(this,l),this.name="sidebar"};exports["default"]=o},538:function(e,exports,t){var n=t(539);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},539:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".md-sidenav-left{background-color:#f5f5f5;width:415px;min-width:415px;max-width:415px}",""])},540:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(541),s=n(r),u=a["default"].module("videoPanel",[l["default"]]).component("videoPanel",s["default"]);exports["default"]=u},541:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(542),a=n(i),o=t(543),l=n(o);t(544);var r={restrict:"E",bindings:{video:"<",favourite:"@"},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},542:function(e,exports){e.exports='<ul class="video-panel">\n  <li class="panel-item-play">\n    <a title="Play video" href="" ng-click="vm.missionSrv.playVideo(vm.video._id)">\n      <md-icon class="material-icons md-10">play_arrow</md-icon>\n    </a>\n  </li>\n\n  <li class="panel-item-playlist" ng-switch="vm.playList.isAdded(vm.video)">\n    <a ng-switch-when="false" title="Add to playlist" href="" ng-click="vm.playList.add(vm.video)">\n      <md-icon class="material-icons md-10">add</md-icon>\n    </a>\n    <a ng-switch-when="true" title="Remove from playlist" href="" ng-click="vm.playList.remove(vm.video)">\n      <md-icon class="material-icons md-10">close</md-icon>\n    </a>\n  </li>\n\n  <li ng-if="vm.favourite != \'false\'" class="panel-item-star" ng-switch="vm.star.isAdded(vm.video)">\n    <a ng-switch-when="false" title="Add to favourite" href="" ng-click="vm.star.add(vm.video)">\n      <md-icon class="material-icons md-10">star_border</md-icon>\n    </a>\n    <a ng-switch-when="true" title="Remove from favourite" href="" ng-click="vm.star.remove(vm.video)">\n      <md-icon class="material-icons md-10">star</md-icon>\n    </a>\n  </li>\n</ul>\n'},543:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=function l(e,t,n){"ngInject";(0,a["default"])(this,l),this.playList=e,this.star=t,this.missionSrv=n};o.$inject=["PlayListService","starService","MissionService"],exports["default"]=o},544:function(e,exports,t){var n=t(545);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},545:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"ul.video-panel{list-style:none;margin:0;padding:0;background-color:#ccc}",""])},546:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(547),s=n(r),u=t(552),d=n(u),c=a["default"].module("player",[l["default"]]).service({dashJS:d["default"]}).component("player",s["default"]);exports["default"]=c},547:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(548),a=n(i),o=t(549),l=n(o);t(550);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},548:function(e,exports){e.exports='<div class="player-wrap" ng-show="vm.video.visible">\n  <a class="player-btn-close" href="" ng-click="vm.close()">\n    <md-icon class="material-icons md-40">close</md-icon>\n  </a>\n\n  <div id="videoContainer">\n    <video id="video-player"></video>\n    <div id="video-caption"></div>\n    <div id="videoController" class="video-controller unselectable">\n      <div id="playPauseBtn" class="btn-play-pause" title="Play/Pause">\n        <span id="iconPlayPause" class="icon-play"></span>\n      </div>\n      <span id="videoTime" class="time-display">00:00:00</span>\n\n      <div id="fullscreenBtn" class="btn-fullscreen" title="Fullscreen">\n        <span class="icon-fullscreen-enter"></span>\n      </div>\n      <input type="range" id="volumebar" class="volumebar" value="1" min="0" max="1" step=".01" />\n\n      <div id="muteBtn" class="btn-mute" title="Mute">\n        <span id="iconMute" class="icon-mute-off"></span>\n      </div>\n      <div title="Setting" id="qualitybutton" class="btn-setting" id="muteBtn1">\n        <span class="icon-setting" id="iconMute1"></span>\n      </div>\n      <div id="captionBtn" class="btn-caption" title="Closed Caption">\n        <span class="icon-caption"></span>\n      </div>\n\n      <span id="videoDuration" class="duration-display">00:00:00</span>\n\n      <div class="seekContainer">\n        <input type="range" id="seekbar" value="0" class="seekbar" min="0" step="0.01"/>\n      </div>\n    </div>\n  </div>\n</div>\n'},549:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=function(){function e(t,n){"ngInject";(0,a["default"])(this,e),this.video=t,this.missionSrv=n}return e.$inject=["dashJS","MissionService"],(0,l["default"])(e,[{key:"close",value:function(){this.video.close(),this.missionSrv.currentVideoId=""}},{key:"$onInit",value:function(){}}]),e}();exports["default"]=r},550:function(e,exports,t){var n=t(551);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},551:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".player-wrap{position:absolute;z-index:1000;right:0;top:0;background-color:#000;padding:0 10px}.player-wrap video{width:100%;height:100%}.player-wrap .player-btn-close{position:absolute;bottom:13px;left:-40px}.player-wrap .player-btn-close .md-40{font-size:40px}.player-wrap .duration-display,.player-wrap .time-display{font-size:14px}",""])},552:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(553),s=n(r),u=t(627),d=n(u),c=t(628),m=(n(c),"video-player"),f=function(){function e(t,n){"ngInject";(0,a["default"])(this,e),this.safeApply=t,this.dashjs=s["default"],this.visible=!1,this.ttmlDiv=null,this.controlbar=null,this.player=this.dashjs.MediaPlayer().create(),this.inited=!1,this.$rootScope=n}return e.$inject=["safeApply","$rootScope"],(0,l["default"])(e,[{key:"init",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.inited?(this.player.attachSource(e),this.player.play()):(this.view=document.getElementById(m),this.player.initialize(this.view,e,t),this.player.attachVideoContainer(document.getElementById("videoContainer")),"undefined"==typeof navigator||navigator.userAgent.match(/Firefox/)||(this.ttmlDiv=document.querySelector("#video-caption"),this.player.attachTTMLRenderingDiv(this.ttmlDiv)),this.controlbar=new d["default"](this.player),this.controlbar.initialize(),this.inited=!0),this.$rootScope.$emit("dashjs:init","dashjs:inited"),this.setVisible(!0)}},{key:"setVisible",value:function(e){this.visible=e,this.safeApply()}},{key:"close",value:function(){this.player.pause(),this.setVisible(!1),this.$rootScope.$emit("dashjs:close","dashjs:closed")}}]),e}();exports["default"]=f},633:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(634),s=n(r),u=a["default"].module("userLoginPage",[l["default"]]).config(["$stateProvider",function(e){"ngInject";e.state("loginPage",{url:"/login",template:"<user-login-page></user-login-page>"})}]).component("userLoginPage",s["default"]);exports["default"]=u},634:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(635),a=n(i),o=t(636),l=n(o);t(637);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},635:function(e,exports){e.exports='<navbar></navbar>\n<div class="user-login-page" layout="row" layout-align="center center" layout-fill>\n  <user-login></user-login>\n</div>\n'},636:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=function l(){(0,a["default"])(this,l),this.name="userLoginPage"};exports["default"]=o},637:function(e,exports,t){var n=t(638);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},638:function(e,exports,t){exports=e.exports=t(340)(),
exports.push([e.id,".user-login-page{text-align:center;padding:100px 0}",""])},639:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(640),s=n(r),u=t(641),d=n(u),c=t(646),m=n(c),f=a["default"].module("playList",[l["default"],m["default"].name]).filter("firstLetters",function(){return function(e,t){if(!e)return e;t||(t=2);var n=e.split(" "),i="";return _.each(n,function(e){e.length&&i.length<t&&(i+=e[0])}),i}}).service({PlayListService:s["default"]}).config(["$stateProvider",function(e){"ngInject";e.state("auth.map.playlist",{url:"/playlist",views:{playList:{template:t(652)}}})}]).component("playList",d["default"]);exports["default"]=f},640:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(t,n,i){"ngInject";(0,a["default"])(this,e),this.missionSrv=t,this.$resource=n,this.resPlaylist=this.$resource(i.API_URL+"/playlist/:id"),this._items=[{_id:1,list:"57c1d7f0a11062c5694de9b8"},{_id:2,list:"57c1d7f0a11062c5694de9b8"},{_id:3,list:"57c1d7f0a11062c5694de9b8"},{_id:4,list:"57c1d7f0a11062c5694de9b8"},{_id:5,list:"57c1d7f0a11062c5694de9b8"},{_id:11,list:"57c1d7fea11062c5694de9ba"},{_id:12,list:"57c1d7fea11062c5694de9ba"},{_id:13,list:"57c1d7fea11062c5694de9ba"},{_id:14,list:"57c1d7fea11062c5694de9ba"},{_id:15,list:"57c1d7fea11062c5694de9ba"},{_id:16,list:"57c1d7fea11062c5694de9ba"},{_id:17,list:"57c1d7ffa11062c5694de9bb"},{_id:18,list:"57c1d7ffa11062c5694de9bb"},{_id:19,list:"57c1d7ffa11062c5694de9bb"},{_id:20,list:"57c1d7ffa11062c5694de9bb"},{_id:21,list:"57c1d800a11062c5694de9bc"},{_id:22,list:"57c1d800a11062c5694de9bc"},{_id:23,list:"57c1d800a11062c5694de9bc"},{_id:24,list:"57c1d800a11062c5694de9bc"},{_id:25,list:"57c1d800a11062c5694de9bc"}],this._itemsMeta=[{_id:1,name:"Video 1"},{_id:2,name:"Video 2"},{_id:3,name:"Video 3"},{_id:4,name:"Video 4"},{_id:5,name:"Video 5"},{_id:6,name:"Video 6"},{_id:7,name:"Video 7"},{_id:8,name:"Video 8"},{_id:9,name:"Video 9"},{_id:10,name:"Video 10"},{_id:11,name:"Video 11"},{_id:12,name:"Video 12"},{_id:13,name:"Video 13"},{_id:14,name:"Video 14"},{_id:15,name:"Video 15"},{_id:16,name:"Video 16"},{_id:17,name:"Video 17"},{_id:18,name:"Video 18"},{_id:19,name:"Video 19"},{_id:20,name:"Video 20"},{_id:21,name:"Video 21"},{_id:22,name:"Video 22"},{_id:23,name:"Video 23"},{_id:24,name:"Video 24"},{_id:25,name:"Video 25"},{_id:"57b576ae3a70e1cf65b0b829",name:"Cool video"}],this._playlist=[{_id:"57c1d7f0a11062c5694de9b8",name:"Favourites"},{_id:"57c1d7fca11062c5694de9b9",name:"Watched"},{_id:"57c1d7fea11062c5694de9ba",name:"List 1"},{_id:"57c1d7ffa11062c5694de9bb",name:"List 2"},{_id:"57c1d800a11062c5694de9bc",name:"List 3"}]}return e.$inject=["MissionService","$resource","ENV"],(0,l["default"])(e,[{key:"addPlayList",value:function(e){if(!e)return void console.error("no name provided for new playlist");var t=new this.resPlaylist;return t.name=e,t.$save()}},{key:"getPlaylist",value:function(){arguments.length<=0||void 0===arguments[0]?null:arguments[0],arguments.length<=1||void 0===arguments[1]?10:arguments[1];return this.resPlaylist.query().$promise}},{key:"addItem",value:function(e,t){e&&t&&this._items.push({_id:e,list:t})}},{key:"removeItem",value:function(e,t){s["default"].remove(this._items,{_id:e,list:t})}},{key:"removePlayList",value:function(e){s["default"].remove(this._playlist,{_id:e})}},{key:"isItemAdded",value:function(e,t){}},{key:"getVideoMetaById",value:function(e){return e?s["default"].find(this._itemsMeta,["_id",e]):void 0}},{key:"getItemsByListId",value:function(e){var t=this;if(e)return s["default"].map(s["default"].filter(this._items,["list",e]),function(e){return s["default"].assign(e,{name:t.getVideoMetaById(e._id).name})})}},{key:"getItemsCountByListId",value:function(e){return e?s["default"].filter(this._items,["list",e]).length:void 0}},{key:"playVideo",value:function(e){this.addItem(e,d),e="57b576ae3a70e1cf65b0b829",this.missionSrv.playVideo(e)}}]),e}();exports["default"]=u;var d="57c1d7fca11062c5694de9b9"},641:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(642),a=n(i),o=t(643),l=n(o);t(644);var r={restrict:"E",bindings:{},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},642:function(e,exports){e.exports='<md-content class="playlist-wrap">\n  <div ui-view="playList"></div>\n  <div ui-view="playListItems"></div>\n</md-content>\n'},643:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=(n(r),function(){function e(t,n){"ngInject";(0,a["default"])(this,e),this.playlistSrv=t,this.dialogSrv=n}return e.$inject=["PlayListService","DialogService"],(0,l["default"])(e,[{key:"$onInit",value:function(){var e=this;this.playlistSrv.getPlaylist().then(function(t){return e.playlist=t})}},{key:"add",value:function(){var e=this,t=this.dialogSrv.showPrompt("Add new playlist");t.then(function(t){t&&e.playlistSrv.addPlayList(t).then(function(t){return e.playlist.push(t)})},function(){console.log("dialog","you hit cancel")})}},{key:"onEditList",value:function(e){console.debug("onEditList",e)}},{key:"onDeleteList",value:function(e){console.debug("onDeleteList",e)}}]),e}());exports["default"]=s},644:function(e,exports,t){var n=t(645);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},645:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".playlist-wrap md-list-item p{font-size:14px}.playlist-wrap md-list-item .md-secondary{display:none}.playlist-wrap md-list-item .playlist-symbol{padding:10px;background-color:orange;width:20px;height:20px;text-align:center;line-height:20px;margin-right:10px;color:#fff;font-size:16px;font-weight:700;overflow:hidden;text-transform:uppercase}.playlist-wrap md-list-item .playlist-count{color:#999}.playlist-wrap md-list-item:hover .md-secondary{display:block}",""])},646:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(300),a=n(i),o=t(305),l=n(o),r=t(647),s=n(r),u=a["default"].module("playListItems",[l["default"]]).config(["$stateProvider",function(e){"ngInject";e.state("auth.map.playlistItems",{url:"/playlist/:playListId",views:{playListItems:{template:'\n                <play-list-items \n                  on-delete-item="vm.onDeleteItem(item)" \n                  on-delete-list="vm.onDeleteList(list)" \n                  on-edit-list="vm.onEditList(list)">\n                </play-list-items>\n              '}}})}]).component("playListItems",s["default"]);exports["default"]=u},647:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(648),a=n(i),o=t(649),l=n(o);t(650);var r={restrict:"E",bindings:{onDeleteItem:"&",onEditList:"&",onDeleteList:"&"},template:a["default"],controller:l["default"],controllerAs:"vm"};exports["default"]=r},648:function(e,exports){e.exports='<md-toolbar class="md-hue-3 md-toolbar-slim">\n\n  <div class="md-toolbar-tools">\n    <md-button class="md-icon-button"\n               aria-label="Back to playlist"\n               flex="none"\n               ui-sref="auth.map.playlist"\n               ng-disabled="">\n      <md-icon class="material-icons">keyboard_arrow_left</md-icon>\n    </md-button>\n\n    <h2>{{vm.currentList.name}}</h2>\n\n    <span flex></span>\n\n    <md-button class="md-icon-button"\n               aria-label="Play all"\n               flex="none"\n               ng-click=""\n               ng-disabled="">\n      <md-icon class="material-icons">playlist_play</md-icon>\n    </md-button>\n\n    <md-menu>\n      <md-button class="md-icon-button"\n                 aria-label="Do more"\n                 flex="none"\n                 ng-click="$mdOpenMenu($event);"\n                 ng-disabled="">\n        <md-icon class="material-icons">more_vert</md-icon>\n      </md-button>\n\n      <md-menu-content width="4">\n        <md-menu-item>\n          <md-button ng-click="vm.editList(vm.currentList)">\n            <md-icon class="material-icon">mode_edit</md-icon>\n            <span>Rename playlist</span>\n          </md-button>\n        </md-menu-item>\n\n        <md-menu-item>\n          <md-button ng-click="vm.onDeleteList({list: vm.currentList})">\n            <md-icon class="material-icon">delete_sweep</md-icon>\n            <span>Delete playlist</span>\n          </md-button>\n        </md-menu-item>\n\n      </md-menu-content>\n    </md-menu>\n\n  </div>\n</md-toolbar>\n\n<md-list-item\n  md-ink-ripple\n  ng-repeat="item in vm.items"\n  class=""\n  ng-click="vm.playlistSrv.playVideo(item._id)"\n>\n  <p>{{ item.name }}</p>\n  <md-button class="md-secondary md-icon-button"\n             aria-label="Delete from playlist"\n             ng-click="vm.removeItem(item)"\n             ng-disabled="">\n    <md-icon class="material-icon">delete</md-icon>\n  </md-button>\n</md-list-item>\n'},649:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(308),a=n(i),o=t(309),l=n(o),r=t(331),s=n(r),u=function(){function e(t,n,i){"ngInject";(0,a["default"])(this,e),this.playlistSrv=t,this.dialogSrv=n,this.$stateParams=i}return e.$inject=["PlayListService","DialogService","$stateParams"],(0,l["default"])(e,[{key:"$onInit",value:function(){this.items=this.playlistSrv.getItemsByListId(this.$stateParams.playListId),this.currentList=this.playlistSrv.getPlaylist(this.$stateParams.playListId)[0]}},{key:"removeItem",value:function(e){s["default"].remove(this.items,e),this.playlistSrv.removeItem(e._id,e.list),this.onDeleteItem(e)}},{key:"editList",value:function(e){var t=this,n=this.dialogSrv.showPrompt("Change playlist name","","name",e.name);n.then(function(n){n&&(e.name=n,t.onEditList({list:e}))})}}]),e}();exports["default"]=u},650:function(e,exports,t){var n=t(651);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},651:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,".playListItems{color:red}",""])},652:function(e,exports){e.exports='<md-toolbar class="md-hue-3 md-toolbar-slim">\n\n  <div class="md-toolbar-tools">\n    <h2>All playlists</h2>\n    <span flex></span>\n    <md-button class="md-icon-button"\n               aria-label="Playlist play"\n               flex="none"\n               ng-click="vm.add()"\n               ng-disabled="">\n      <md-icon class="material-icons">playlist_add</md-icon>\n    </md-button>\n  </div>\n</md-toolbar>\n\n<md-list-item\n  md-ink-ripple\n  ng-repeat="item in vm.playlist"\n  class=""\n  ui-sref="auth.map.playlistItems({playListId: item._id})"\n>\n  <div class="playlist-symbol">{{ item.name | firstLetters }}</div>\n  <p>{{ item.name }}</p>\n</md-list-item>\n\n<md-subheader class="md-primary" ng-if="!vm.playlist.length">\n  No playlist items added yet\n</md-subheader>\n'},653:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(654),a=n(i);t(655);var o={template:a["default"],restrict:"E"};exports["default"]=o},654:function(e,exports){e.exports='<!-- Place all UI elements intended to be present across all routes in this file -->\n<div class="app">\n  <div ui-view class="main-view"></div>\n</div>\n'},655:function(e,exports,t){var n=t(656);"string"==typeof n&&(n=[[e.id,n,""]]);t(341)(n,{});n.locals&&(e.exports=n.locals)},656:function(e,exports,t){exports=e.exports=t(340)(),exports.push([e.id,"body,html{position:static!important}.ml0{margin-left:0!important}body .md-open-menu-container{z-index:1001}.app,.app .main-view{height:100%}.app .sidebar-content{padding:8px}.app .md-toolbar-slim{font-size:15px;min-height:40px}.app .md-toolbar-slim .md-toolbar-tools{font-size:15px;height:40px}.app .playing-video{color:#00f}",""])}});
//# sourceMappingURL=app.bundle.js.map